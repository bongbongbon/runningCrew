{"ast":null,"code":"// src/contexts/AuthContext.js\nimport React,{createContext,useState,useEffect}from'react';import axiosInstance from'../utils/axiosInstance';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);useEffect(()=>{const fetchUser=async()=>{try{const response=await axiosInstance.get('/api/user/profile');setUser(response.data);}catch(error){console.error('Failed to fetch user:',error);}};const token=localStorage.getItem('token');if(token){fetchUser();}},[]);const login=async(email,password)=>{try{const response=await axiosInstance.post('/user/login',{email,password});localStorage.setItem('token',response.data.token);setUser(response.data.user);}catch(error){throw error;}};const logout=()=>{localStorage.removeItem('token');setUser(null);window.location.href='/';// 로그인 페이지로 리다이렉트\n};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,login,logout},children:children});};export{AuthContext,AuthProvider};","map":{"version":3,"names":["React","createContext","useState","useEffect","axiosInstance","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","fetchUser","response","get","data","error","console","token","localStorage","getItem","login","email","password","post","setItem","logout","removeItem","window","location","href","Provider","value"],"sources":["/Users/kimsubong/Desktop/hello/runningCrew/src/contexts/AuthContext.js"],"sourcesContent":["// src/contexts/AuthContext.js\nimport React, { createContext, useState, useEffect } from 'react';\nimport axiosInstance from '../utils/axiosInstance';\n\nconst AuthContext = createContext();\n\nconst AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      try {\n        const response = await axiosInstance.get('/api/user/profile');\n        setUser(response.data);\n      } catch (error) {\n        console.error('Failed to fetch user:', error);\n      }\n    };\n\n    const token = localStorage.getItem('token');\n    if (token) {\n      fetchUser();\n    }\n  }, []);\n\n  const login = async (email, password) => {\n    try {\n      const response = await axiosInstance.post('/user/login', { email, password });\n      localStorage.setItem('token', response.data.token);\n      setUser(response.data.user);\n    } catch (error) {\n      throw error;\n    }\n  };\n\n  const logout = () => {\n    localStorage.removeItem('token');\n    setUser(null);\n    window.location.href = '/'; // 로그인 페이지로 리다이렉트\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, login, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport { AuthContext, AuthProvider };\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CACjE,MAAO,CAAAC,aAAa,KAAM,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEnD,KAAM,CAAAC,WAAW,cAAGN,aAAa,CAAC,CAAC,CAEnC,KAAM,CAAAO,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAChC,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CAEtCC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAU,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAV,aAAa,CAACW,GAAG,CAAC,mBAAmB,CAAC,CAC7DH,OAAO,CAACE,QAAQ,CAACE,IAAI,CAAC,CACxB,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC/C,CACF,CAAC,CAED,KAAM,CAAAE,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACTN,SAAS,CAAC,CAAC,CACb,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAS,KAAK,CAAG,KAAAA,CAAOC,KAAK,CAAEC,QAAQ,GAAK,CACvC,GAAI,CACF,KAAM,CAAAV,QAAQ,CAAG,KAAM,CAAAV,aAAa,CAACqB,IAAI,CAAC,aAAa,CAAE,CAAEF,KAAK,CAAEC,QAAS,CAAC,CAAC,CAC7EJ,YAAY,CAACM,OAAO,CAAC,OAAO,CAAEZ,QAAQ,CAACE,IAAI,CAACG,KAAK,CAAC,CAClDP,OAAO,CAACE,QAAQ,CAACE,IAAI,CAACL,IAAI,CAAC,CAC7B,CAAE,MAAOM,KAAK,CAAE,CACd,KAAM,CAAAA,KAAK,CACb,CACF,CAAC,CAED,KAAM,CAAAU,MAAM,CAAGA,CAAA,GAAM,CACnBP,YAAY,CAACQ,UAAU,CAAC,OAAO,CAAC,CAChChB,OAAO,CAAC,IAAI,CAAC,CACbiB,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,GAAG,CAAE;AAC9B,CAAC,CAED,mBACEzB,IAAA,CAACC,WAAW,CAACyB,QAAQ,EAACC,KAAK,CAAE,CAAEtB,IAAI,CAAEW,KAAK,CAAEK,MAAO,CAAE,CAAAjB,QAAA,CAClDA,QAAQ,CACW,CAAC,CAE3B,CAAC,CAED,OAASH,WAAW,CAAEC,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}